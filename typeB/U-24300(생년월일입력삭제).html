<!DOCTYPE html>
<html lang="ko">

<head>
	<meta charset="utf-8">
	<meta name="viewport"
		content="initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, width=device-width, user-scalable=no">
	<meta name="format-detection" content="telephone=no">
	<title>무료운세</title>
	<link href="css/stock_letter.css" rel="stylesheet" type="text/css">
	<link href="css/swiper.css" rel="stylesheet" type="text/css">
</head>

<body>
	<div id="wrap" class="luck">
		<div class="header">
			<h2 class="wrap">
				<a href="javascript:void(0);" class="prevBtn" role="button">
					<img src="img/arrow_back.svg" alt="이전">
				</a>
				<span class="title">무료운세</span>
			</h2>
		</div>
		<div class="fix_wrap">
			<div class="container_wrap style01">
				<div class="both_mod">
					<!-- 20200603 슬라이드 영역추가 -->
					<div class="banner">
						<div class="swiper-container">
							<ul class="swiper-wrapper">
								<li class="swiper-slide">
									<img src="img/1_01.png" alt="빌레터 회원만의 특별한 무료 운세 서비스">
								</li>
								<li class="swiper-slide">
									<img src="img/1_02.png" alt="나의 재물운에 맞는 투자조언서비스 알림">
								</li>
								<li class="swiper-slide">
									<img src="img/1_03.png" alt="총운, 신년운세, 정통사주, 재물, 궁합, 타로 등 다양한 운세 제공">
								</li>
							</ul>
							<div class="main_pagination"><div class="swiper-pagination"></div></div>
						</div>
					</div>
					<!--// 20200603 슬라이드 영역추가 -->
					<div class="price">
						<p>이용요금 : 무료</p>
					</div>

                    <!-- 인증 -->
                    <div class="sms_wrap">
    					<div class="input_form" id="payForm">
    						<div class="cert_ing">
    							<!-- 인증 진행중일 때 노출 -->
    							<!-- 휴대폰번호 -->
    							<div class="if_wrap">
    								<label for="fi_in_phone">휴대폰번호</label>
    								<input type="number" inputmode="numeric" pattern="[0-9]*" class="ui_auth_input" id="fi_in_phone" autocomplete="off" value="" maxlength="11" placeholder="상대방 휴대폰번호 입력">
    							</div>
    							<!-- 인증번호 : 인증번호 발송하기 클릭되면 노출 -->
    							<div class="cert_wrap" id="authForm">
    								<div class="if_wrap cert"> <!-- 20200805 인증번호일치시 : same, 불일치시 : nosame -->
    									<input type="hidden" id="doneAuth" value="" data-required="true">
    									<!-- 폰인증이 끝나면 Y를 넣어주시고 $('#payForm').vcBeautifyForm('validate'); 를 실행해주시면 버튼이 활성화됩니다. -->
    									<input type="number" inputmode="numeric" pattern="[0-9]*" id="fi_in_cert" value="" maxlength="4" placeholder="인증번호 입력" title="인증번호 입력">
    								</div>
    								<!-- 기존 남은시간 -->
    								<!-- <span class="time"><span class="hide">남은시간</span> <span id="authTimer">100분</span></span> -->
    								<!-- 20200805 일치시 -->
    								<span class="time"><span class="hide">인증번호 확인</span> <span id="same">일치</span></span>
    								<p class="r_time" id="sameMsg">인증이 완료되었습니다.</p>
    								<!-- 20200805 불일치시 -->
    								<!-- <span class="time" ><span class="hide">인증번호 확인</span> <span id="noSame">불일치</span></span> -->
    								<p class="r_time" id="nosameMsg">전송된 인증번호의 유효 시간은 <span id="authTimer">3분</span> 입니다.</p>
    							</div>
    						</div>
    						<!-- button -->
    						<div class="btn_wrap cer">
    							<button type="button" class="btn_comm impor" id="btnSendAuthNum" disabled="disabled">인증요청</button>
    							<!-- 휴대폰번호 입력하면 활성화되며 인증번호 발송하기 클릭되면 비 노출 -->
    						</div>
    					</div>
    				</div>
                    <!-- //인증  -->

					<div class="sides">
						<div id="checkAll" class="left_side">
							<div class="chk_wrap">
								<input type="checkbox" name="fn_privacy_a" id="fn_privacy_a">
								<label for="fn_privacy_a"><span class="label_group">약관 동의</span></label>
							</div>
						</div>
						<div class="right_side">
							<ul id="checkList" class="list">
								<li>
									<div class="chk_wrap type1" onclick="modal_open('.U-24300_P-01');">
										<input type="checkbox" name="fn_privacy" id="fn_privacy1">
										<label for="fn_privacy1"><span class="label_group">마케팅 제공동의</span></label>
									</div>
								</li>
							</ul>
						</div>
					</div>
				</div>
				<div class="btn_wrap">
					<button type="button" class="btn_comm em" id="btnAccept" onclick="agreeChk();">무료 운세 확인하기</button>
				</div>
			</div>
			<div class="bottom_conts">
				<h3 class="tit_note">유의사항</h3>
				<ul class="list_bl_desc">
                    <li>본 서비스는 <span class="emp">무료</span>입니다.</li>
					<li>운세정보를 문자로 받으실 수 있습니다.(주말 및 법정공휴일 제외)</li>
					<li>별도 해지 요청이 없는 경우 운세 서비스가 유지됩니다.</li>
					<li>서비스 이용문의 및 해지안내는 ㈜몬스터큐브 고객센터 1522-9746 을 통해 가능합니다.</li>
			</div>
		</div>

        <!-- layer popup, U-24300_A-01-->
    	<div id="lay_wrap" class="lay_message lay_message_type2 U-24300_A-01">
    		<div class="lay_content">
    			<div class="head_group">
    				<h1 class="tit_message">
    					<strong class="strong">안내</strong>
    				</h1>
    			</div>
    			<div class="cnt_message">
    				<div class="mt15">
    					<p>약관에 동의 해주세요.</p>
    				</div>
    			</div>
    		</div>
    		<footer class="lay_footer">
    			<button type="button" class="fl_r ui_modal_never_show" onclick="modal_close('.U-24300_A-01');">확인</button>
    		</footer>
    	</div>

        <!-- layer popup, U-24300_A-02 -->
    	<div id="lay_wrap" class="lay_message lay_message_type2 U-24300_A-02">
    		<div class="lay_content">
    			<div class="head_group">
    				<h1 class="tit_message">
    					<strong class="strong">안내</strong>
    				</h1>
    			</div>
    			<div class="cnt_message">
    				<div class="mt15">
    					<p>신청이 완료되었습니다.</p>
    				</div>
    			</div>
    		</div>
    		<footer class="lay_footer">
    			<button type="button" class="fl_r ui_modal_never_show" onclick="modal_close('.U-24300_A-02');">확인</button>
    		</footer>
    	</div>

        <!-- layer popup, U-24300_A-05-->
        <div id="lay_wrap" class="lay_message lay_message_type2 U-24300_A-05">
            <div class="lay_content">
                <div class="head_group">
                    <h1 class="tit_message">
                        <strong class="strong">안내</strong>
                    </h1>
                </div>
                <div class="cnt_message">
                    <div class="mt15">
                        <p>휴대폰 인증을 완료해주세요.</p>
                    </div>
                </div>
            </div>
            <footer class="lay_footer">
                <button type="button" class="fl_r ui_modal_never_show" onclick="modal_close('.U-24300_A-05');">확인</button>
            </footer>
        </div>


        <!-- layer popup, U-24300_P-01 -->
    	<div id="lay_wrap" class="lay_message lay_message_type3 terms U-24300_P-01" style="height:70%">
    		<div class="lay_content">
    			<div class="head_group">
    				<h1 class="tit_message">
    					<strong class="strong">개인정보 제3자 제공</strong>
    				</h1>
    			</div>
    			<div class="cnt_message">
    				<div class="scrollY">
    					<div class="terms_conts">
    						<p class="tm_txt">“회사는 정보주체의 개인정보를 제1조(개인정보의 처리 목적)에서 명시한 범위 내에서만 처리하며, 정보주체의 동의, 법률의 특별한 규정 등 『개인정보 보호법』 제17조 및 제18조에 해당하는 경우에만 개인정보를 제3자에게 제공합니다.
    회사는 다음과 같이 개인정보를 제3자에게 제공하고 있습니다.
    </p>
    						<h3 class="tm_tit1">1. 개인정보 제3자 제공 동의</h3>
    						<p class="tm_txt">본 서비스와 관련하여 본인은 동의 내용을 숙지하였으며 이에 따라 회사가 수집한 본인의 개인정보를 아래와 같이 제3자에게 제공하는 것에 대해 동의합니다.</p>
    						<div class="tb_type1">
    							<table>
    								<caption>개인정보 제3자 제공 동의 테이블 입니다. 제공하는 자, 제공받는 자, 제공항목, 제공목적, 보유 기간을 확인하실 수 있습니다.</caption>
    								<colgroup>
    									<col style="width:20%">
    									<col style="width:20%">
    									<col style="width:20%">
    									<col style="width:20%">
    								</colgroup>
    								<thead>
    									<tr>
    										<th scope="col">제공받는 자</th>
    										<th scope="col">제공목적</th>
    										<th scope="col">제공항목</th>
    										<th scope="col">보유 기간</th>
    									</tr>
    								</thead>
    								<tbody>
    									<tr>
    										<td class="first">이동통신사(SKT)</td>
    										<td>부가서비스 가입/해지 서비스 제공, 월 정액</td>
    										<td>휴대폰번호</td>
    										<td>서비스 해지 후 정산 완료 시까지<br>
    										(단, 법령에 정해진 개인정보 보유기간이 있을 경우 그에 따름)</td>
    									</tr>
    								</tbody>
    							</table>
    						</div>
    						<ul class="list_tm">
    							<li>&middot; 단, 법령에서 따로 정하는 경우 해당 기간까지 보유합니다.</li>
    							<li>&middot; 고객은 개인정보 제공에 동의하지 않을 수 있으며, 동의하지 않을 경우 본 서비스 이용이 불가능 합니다.</li>
    							<li>&middot; 회사는 상기 목적 외에는 이용자 정보를 제공하지 않으며, 서비스 이용을 위한 목적 외에는 고객정보를 활용하지 않습니다.</li>
    							<li>&middot; 상기 내용이 변경되는 경우 서비스 홈페이지(stockletter.co.kr)을 통해 안내 드립니다.</li>
    						</ul>
    						<p class="tm_txt">(시행일) 이 약관은 2020년 6월 1일부터 시행합니다.</p>

    					</div>
    				</div>
    			</div>
    		</div>
    		<footer class="lay_footer btn_area_cls">
    			<button type="button" class="fl_r ui_modal_never_show btn_cls" onclick="modal_close('.U-24300_P-01');"><span class="hide">닫기</span></button>
    		</footer>
    	</div>
	</div>

	<script src="js/jquery.min.js"></script>
	<script src="js/swiper.min.js"></script>
	<script src="js/vcui.js"></script>
	<script src="js/vcui.common-ui.js"></script>
	<script src="js/site.js"></script>
	<script>
    // 모달창 제어
    function modal_close(el) { $(el).vcModal('close'); } // 닫아준다.
    function modal_open(el) { $(el).vcModal('open'); } // 모달생성

    $(function () {
        vcui.require([
            'ui/checkboxAllChecker',
            'ui/beautifyForm'
        ], function () {
            // 휴대폰 번호 입력체크
            $('#payForm').vcBeautifyForm();
        });


        //모달창 푸터 버튼영역이 있을경우 class 추가
        $("#lay_wrap").children('.lay_footer').parents('#lay_wrap').addClass('lay_hasFoot');


        // 이용약관 동의 체크
        var $checkAll = $('#checkAll').find('input[type="checkbox"]'),
            $checkList = $('input[name="fn_privacy"]');
        $checkAll.on('change', function () {
            var checked = $(this).prop('checked');
            $('input[name="fn_privacy"]').prop('checked', checked);
        });
        $checkList.on('change', function () {
            var cl = $checkList.length,
            ccl = $('input[name="fn_privacy"]:checked').length,
            chkTrue = (cl == ccl);
            $checkAll.prop('checked', chkTrue);
        });


        // 휴대폰번호 입력 유효성체크 완료시 인증번호 발송버튼 활성화
        $('#payForm').on('input focusout keyup', '.ui_auth_input', function () {
            var mobile = $('#fi_in_phone').val(),
                rgEx = /^(01[016789]{1}[1-9]{1}[0-9]{2,3})[0-9]{4}$/,
                chkFlg = rgEx.test(mobile);

            if(chkFlg) {
                $('#btnSendAuthNum').prop('disabled',false);
            }
        });


        // 인증번호 발송버튼 클릭
        $('#btnSendAuthNum').on('click', function () {
            $('#nosameMsg').show();
            if (timeStatus == '') {
                timeStart();
            } else {
                timeReset();
            }
            $('#sameMsg').hide();
            $('.time').hide();
            $('#authForm').show(); // 인증번호 입력란 표시
            $(this).text('재전송');
            $(this).prop('disabled', true);
            setTimeout(function(){
                $('#btnSendAuthNum').prop('disabled', false);
            },3000);
            // 인증번호 발송전 SKT 회원인지 확인하는 유효성 검사 필요
            if (true) {
                alert('인증번호가 발송되었습니다.');
            } else {
                alert('무료운세 서비스는 SKT회원만 이용가능한 서비스 입니다.');
            }
        });


        // 인증번호 입력완료 유효성 체크
        $('#fi_in_cert').on('input', function () {
            if ($('#fi_in_cert').val().length == 4) { //인증번호 4자리 입력완료시 유효성 체크
                if(true){ //SMS 인증 성공 시
                    $('#doneAuth').val('Y');
                    $('#payForm').css('pointer-events','none');
                    $('#authForm .cert').addClass('on same');
                    $('#authForm .cert').removeClass('nosame');
                    $('#btnSendAuthNum').prop('disabled', true);
                    $('.time').text('일치').show(); // 인증완료 문구 출력
                    $('#sameMsg').show(); // 인증완료 문구 출력
                    $('#nosameMsg').hide();
                } else { //인증 실패시
                    $('#authForm .cert').addClass('on nosame');
                    $('#authForm .cert').removeClass('same');
                    $('.time').text('불일치').show();
                }
            }
        });


        // 무료운세확인하기(서비스 신청)버튼 클릭
        $('#btnAccept').on('click', function() {
            if ($('#doneAuth').val() == '') {
                modal_open('.U-24300_A-05');
            } else if ($('input[name="fn_privacy"]').is(":checked") == false) {
                modal_open('.U-24300_A-01');
            } else {
                // modal_open('.U-24300_P-00');
                // 서비스 신청 완료 프로세스 진행
                modal_open('.U-24300_A-02');
            }
        });
    });


    /* 슬라이드 배너 */
    var Swiper = new Swiper('.banner .swiper-container', {
        spaceBetween: 0,
        loop: false,
        centeredSlides: true,
        autoplay: {
            delay: 3000,
            disableOnInteraction: false,
        },
        pagination: {
            el: '.swiper-pagination',
            type: 'bullets',
        },
        keyboard: {
            enabled: true,
        },
        on: {
            init: function (swiper) {
                $('.swiper-slide').attr('aria-hidden', 'true');
                var fl = $('.swiper-wrapper').find('a');
                fl.removeAttr('data-default-tabindex');
                fl.removeAttr('tabindex');
                fl.attr({
                    'tabindex': '-1',
                    'data-default-tabindex': 'none'
                });
                $('.swiper-slide-active').attr('aria-hidden', 'false');
                var fa = $('.swiper-slide-active').find('a');
                fa.attr({
                    'tabindex': '0',
                    'data-default-tabindex': '0'
                });
            },
            slideChange: function (swiper) {
                $('.swiper-slide').attr('aria-hidden', 'true');
                var fl = $('.swiper-wrapper').find('a');
                fl.attr({
                    'tabindex': '-1',
                    'data-default-tabindex': 'none'
                });
                setTimeout(function () {
                    $('.swiper-slide-active').attr('aria-hidden', 'false');
                    var fa = $('.swiper-slide-active').find('a');
                    fa.attr({
                        'tabindex': '0',
                        'data-default-tabindex': '0'
                    });
                }, 100);
            }
        }
    });


    // 인증번호 유효 시간 타이머
    var timeStatus = '',
        time = 179,
        min = '',
        sec = '';

    function timeStart() {
        var x = setInterval(function() {
                var min = parseInt(time/60),
                sec = time%60;

                if (time < 0) {
                clearInterval(x);
                } else {
                    $('#authTimer').html(min + '분' + sec +'초');
                }
            time--;
            timeStatus = 'ing';
        }, 1000);
    }

    function timeReset() {
        time = 179;
    }
	</script>
</body>

</html>
